# issue ビジュアライズ表示の枠が出るようになったが、console.logにエラーが表示され、波形表示がされない #76
[issues #76](https://github.com/cat2151/wavlpf/issues/76)

## 問題の概要
オシロスコープの表示枠は表示されるが、console.logに「Failed to update oscilloscope」というエラーが表示され、実際の波形が描画されない。

## 根本原因
cat-oscilloscopeライブラリのWASMファイル（`wasm_processor.js`など）がブラウザから読み込めない状態だった。

cat-oscilloscopeは高速な波形処理のためにRust/WASMを使用しており、`{basePath}/wasm/wasm_processor.js`から動的にWASMモジュールを読み込む。しかし、Viteのビルド時にこれらのファイルが`dist/wasm/`にコピーされていなかったため、ブラウザがWASMファイルを取得できず、初期化に失敗していた。

## 解決方法
1. **postinstallスクリプトの追加** (`scripts/setup-cat-oscilloscope-wasm.js`)
   - npm install後に自動実行
   - `node_modules/cat-oscilloscope/dist/wasm/` から `public/wasm/` にWASMファイルをコピー

2. **Viteのpublicディレクトリ機能を活用**
   - 開発時：`public/wasm/` が `http://localhost:8080/wasm/` として提供される
   - ビルド時：`public/wasm/` が `dist/wasm/` に自動コピーされる

3. **.gitignoreの更新**
   - `public/wasm/` を追加（自動生成されるため）

## 詳細ドキュメント
- [docs/ISSUE_76_RESOLUTION.md](../docs/ISSUE_76_RESOLUTION.md) - 詳細な技術説明と検証結果
- [docs/CAT_OSCILLOSCOPE_WASM_SETUP.md](../docs/CAT_OSCILLOSCOPE_WASM_SETUP.md) - セットアップ方法とトラブルシューティング

## 検証結果
- TypeScriptコンパイル：✓ エラーなし
- テスト実行：✓ 50 passed | 22 skipped
- postinstallスクリプト：✓ 正常動作

## CI/CD対応
GitHub ActionsのCIでも、npm ci実行時にpostinstallスクリプトが自動実行されるため、追加の設定は不要。

