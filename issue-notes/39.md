# issue 波形生成処理の処理時間表示が、0ms、10ms、20ms、30msの4種類しか表示されない。より正確に処理時間を計測表示する方法があるか分析する #39
[issues #39](https://github.com/cat2151/wavlpf/issues/39)

## 分析結果

### 根本原因
ブラウザのセキュリティ機能（タイミング攻撃対策）により、`performance.now()`の精度が意図的に制限されています。
- 多くのブラウザで1ms〜10ms単位に丸められる
- これはSpectre攻撃などのタイミング攻撃を防ぐための重要なセキュリティ機能

### 解決策
単一計測値の精度向上は困難なため、**統計的手法**を採用しました：

1. 最新10回の計測値を保持
2. 現在値、最小値、最大値、平均値を計算して表示
3. プロセッサ切替時に統計をリセット

### 表示例
```
Generation time (TypeScript): 10.00ms [n=5, min=10.00ms, max=20.00ms, avg=14.00ms]
```

### 実装内容
- `src/synth.ts`: 統計トラッキング機能の追加
- `src/performance-stats.test.ts`: 統計計算ロジックのテスト（14テスト、全てパス）
- `PERFORMANCE_TIMING_ANALYSIS.md`: 詳細な分析ドキュメント
- `PERFORMANCE_DISPLAY_DEMO.md`: ビジュアルデモとユースケース

### 利点
- 複数回の計測により実際の処理時間をより正確に推定可能
- 処理時間の変動範囲（安定性）を把握可能
- ブラウザのセキュリティポリシーに準拠
- シンプルで保守しやすい実装

