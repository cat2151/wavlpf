# wavlpf

A simple software synthesizer with a Low-Pass Filter (LPF) implemented in TypeScript

## Demo

https://cat2151.github.io/wavlpf/

*Note: This document is temporary, and was quickly generated by an LLM. It will be revised in the future.*

## Features

- **220Hz Sawtooth Wave Generator**: Pure signal processing implementation
- **Biquad LPF Filter**: Interactive filter controlled by mouse
  - X-axis: Cutoff Frequency (20Hz - 4000Hz)
  - Y-axis: Resonance Q-value (0.5 - 16.0, inverted: Up = High, Down = Low)
  - Automatic cutoff decay of 1Hz per millisecond
- **Non-Realtime Rendering**: WebAudio-independent signal processing
- **250ms Audio Buffer**: Generates new audio every 250ms
- **WAV Generation**: Converts processed audio to WAV format
- **Tone.js Integration**: Clean audio playback

## Related Documentation

### cat-oscilloscope Integration Research

**ðŸŒŸ Recommended** - [CAT_OSCILLOSCOPE_LIBRARY_BEST_PRACTICES.md](CAT_OSCILLOSCOPE_LIBRARY_BEST_PRACTICES.md) - **Comprehensive Analysis Focusing on Best Practices** (Japanese)

**Reference Materials**:
- [CAT_OSCILLOSCOPE_INTEGRATION.md](CAT_OSCILLOSCOPE_INTEGRATION.md) - Minimal Change Approach (For Reference)
- [ARCHITECTURE_DIAGRAMS.md](ARCHITECTURE_DIAGRAMS.md) - Architecture Diagrams
- [IMPLEMENTATION_EXAMPLES.md](IMPLEMENTATION_EXAMPLES.md) - Implementation Examples

### Development Guide

- **[DEVELOPMENT.md](DEVELOPMENT.md)** - Development Framework and Testing Strategy

## Getting Started

For details on the development framework and testing strategy, please refer to [DEVELOPMENT.md](DEVELOPMENT.md).

For waveform visualization integration, please refer to [CAT_OSCILLOSCOPE_LIBRARY_BEST_PRACTICES.md](CAT_OSCILLOSCOPE_LIBRARY_BEST_PRACTICES.md).

### Prerequisites

- Node.js (v14 or higher)
- npm

### Installation

```bash
npm install
```

### Development

Start the development server with Hot Module Replacement:

```bash
npm run dev
```

This will launch a Vite development server with instant HMR. Your browser will automatically open to http://localhost:8080.

### Build

```bash
npm run build
```

Runs TypeScript type checking and builds the production bundle with Vite.

### Preview Production Build

```bash
npm run preview
```

Locally preview the production build before deployment.

### Testing

Run the test suite:

```bash
npm test         # Watch mode
npm run test:run # Run once
npm run test:ui  # Visual test runner
npm run coverage # Generate coverage report
```

### Run (Legacy)

Note: The `serve` command now uses Vite's preview server:

```bash
npm run serve
```

Then, open http://localhost:8080 in your browser (for development, please use `npm run dev`).

## Usage

1. Open the application in your browser
2. Click anywhere on the page to start the audio context
3. Move your mouse to control filter parameters:
   - **Horizontal position (X)**: Controls cutoff frequency (20Hz - 4000Hz)
   - **Vertical position (Y)**: Controls resonance/Q value (0.5 - 16.0, inverted: Up = High, Down = Low)
4. Listen to new audio generated every 250ms with the current filter settings

## Architecture

### Signal Processing (WebAudio Independent)

- `src/oscillator.ts`: Sawtooth wave generator
- `src/filter.ts`: Biquad LPF implementation using RBJ Audio EQ Cookbook formulas
- `src/wav.ts`: WAV file format generation

### Application

- `src/synth.ts`: Main synthesizer logic including mouse tracking and audio playback
- `src/index.ts`: Entry point
- `index.html`: Web interface

## Deployment

The application is automatically deployed to GitHub Pages when changes are pushed to the `main` branch. Deployment workflow:

1. Install Node.js dependencies
2. Build TypeScript to JavaScript
3. Copy necessary files from `index.html`, `dist/`, and `node_modules/` to the deployment directory
4. Deploy to GitHub Pages

The workflow is defined in `.github/workflows/deploy.yml`.

## License

MIT